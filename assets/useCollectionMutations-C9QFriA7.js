import{r as l}from"./vendor-VhFNdCEW.js";import{D as s}from"./RepositoryFactory-CZV-Y2mo.js";import{l as i}from"./index-Dq3omjz3.js";function P(o,b){const{collectionName:c,onSuccess:r,onError:a,onProgress:u}=b,[D,f]=l.useState(!1),[k,E]=l.useState(!1),[h,g]=l.useState(!1),[I,m]=l.useState(!1),w=l.useCallback(async n=>{f(!0);try{const e=await o.create(n);return r&&r("create"),e}catch(e){i.error("Error creating item:",e);const t=e instanceof s?e:new s({code:"OPERATION_FAILED",message:"Failed to create item",originalError:e instanceof Error?e:void 0});return a&&a(t,"create"),null}finally{f(!1)}},[o,c,r,a]),A=l.useCallback(async(n,e)=>{E(!0);try{const t=await o.update(n,e);return r&&r("update"),t}catch(t){i.error("Error updating item:",t);const d=t instanceof s?t:new s({code:"OPERATION_FAILED",message:"Failed to update item",originalError:t instanceof Error?t:void 0});return a&&a(d,"update"),null}finally{E(!1)}},[o,c,r,a]),F=l.useCallback(async n=>{g(!0);try{return await o.delete(n),r&&r("delete"),!0}catch(e){i.error("Error deleting item:",e);const t=e instanceof s?e:new s({code:"OPERATION_FAILED",message:"Failed to delete item",originalError:e instanceof Error?e:void 0});return a&&a(t,"delete"),!1}finally{g(!1)}},[o,c,r,a]),O=l.useCallback(async n=>{m(!0);try{if(u&&n.length>1){let e=0;const t=n.length;for(const d of n)await o.delete(d),e++,u(e,t)}else await o.bulkDelete(n);return r&&r("bulkDelete"),!0}catch(e){i.error("Error bulk deleting items:",e);const t=e instanceof s?e:new s({code:"OPERATION_FAILED",message:"Failed to bulk delete items",originalError:e instanceof Error?e:void 0});return a&&a(t,"bulkDelete"),!1}finally{m(!1)}},[o,c,r,a,u]);return{creating:D,updating:k,deleting:h,bulkDeleting:I,create:w,update:A,deleteItem:F,bulkDelete:O}}export{P as u};
