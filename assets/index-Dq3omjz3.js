const __vite__fileDeps=["assets/Sidebar-BOTj-UPQ.js","assets/vendor-VhFNdCEW.js","assets/Dashboard-Dh9EknLX.js","assets/useCollection-BRHjIwN1.js","assets/RepositoryFactory-CZV-Y2mo.js","assets/firebase-BqgI0o68.js","assets/Login-CvTrymup.js","assets/Register-DtAtGpcj.js","assets/CarouselItemsPage-_u_iJEeW.js","assets/HomeImagesPage-BNSr0Hxu.js","assets/CollectionPage-BMWte77z.js","assets/useCollectionMutations-C9QFriA7.js","assets/ForumManagementPage-DxsQjZnU.js","assets/LearnPage-PpQ-qk_N.js","assets/QuizesPage-DDJVXtNt.js","assets/VideosPage-B7A3JDIU.js","assets/QuizManagerPage-h2x8GNz4.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var T=Object.defineProperty;var L=(r,t,a)=>t in r?T(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a;var g=(r,t,a)=>L(r,typeof t!="symbol"?t+"":t,a);import{r as s,j as e,u as N,a as P,L as k,b as z,c as C,d as F,e as B,O as j,f as D,g as O,h as V,i as M,R as G,k as U}from"./vendor-VhFNdCEW.js";import{G as $,s as K,b as q,o as W,i as H,g as Q,a as Y,c as J,d as Z}from"./firebase-BqgI0o68.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=a(o);fetch(o.href,n)}})();const X="modulepreload",ee=function(r){return"/cifdashboard/"+r},_={},h=function(t,a,l){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),i=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=Promise.all(a.map(c=>{if(c=ee(c),c in _)return;_[c]=!0;const d=c.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":X,d||(u.as="script",u.crossOrigin=""),u.href=c,i&&u.setAttribute("nonce",i),document.head.appendChild(u),d)return new Promise((f,x)=>{u.addEventListener("load",f),u.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}return o.then(()=>t()).catch(n=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=n,window.dispatchEvent(i),!i.defaultPrevented)throw n})},y=s.createContext(void 0);function te({authService:r,children:t}){const[a,l]=s.useState(null),[o,n]=s.useState(!0);s.useEffect(()=>r.onAuthStateChanged(u=>{l(u),n(!1)}),[r]);const d={user:a,loading:o,login:async()=>{const m=await r.loginWithGoogle();return l(m),m},logout:async()=>{await r.logout(),l(null)}};return e.jsx(y.Provider,{value:d,children:t})}function re(){const r=s.useContext(y);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}const b={debug:(...r)=>{},info:(...r)=>{},warn:(...r)=>{console.warn(...r)},error:(...r)=>{console.error(...r)}};class se{constructor(t){g(this,"auth");g(this,"provider");this.auth=t,this.provider=new $,this.provider.setCustomParameters({prompt:"select_account",authType:"signIn"})}mapFirebaseUser(t){return t?{uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL}:null}getCurrentUser(){return this.mapFirebaseUser(this.auth.currentUser)}async loginWithGoogle(){try{const t=await K(this.auth,this.provider,q),a=this.mapFirebaseUser(t.user);if(!a)throw new Error("Failed to get user information");return a}catch(t){b.error("Firebase auth error:",t);const a=typeof t=="object"&&t!==null&&"code"in t?t.code:"",l=t instanceof Error?t.message:"Failed to login with Google";throw a==="auth/popup-blocked"?new Error("Please allow popups for this website"):a==="auth/cancelled-popup-request"?new Error("Login was cancelled"):a==="auth/popup-closed-by-user"?new Error("Login popup was closed"):a==="auth/unauthorized-domain"?new Error("This domain is not authorized for Firebase Authentication"):new Error(l)}}async logout(){try{await this.auth.signOut()}catch(t){throw b.error("Logout error:",t),new Error(t instanceof Error?t.message:"Failed to logout")}}onAuthStateChanged(t){return W(this.auth,a=>{t(this.mapFirebaseUser(a))})}}const I=s.createContext(void 0),ae=({children:r})=>{const[t,a]=s.useState(()=>localStorage.getItem("theme")||"dark");s.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(t),localStorage.setItem("theme",t)},[t]);const l=()=>{a(o=>o==="light"?"dark":"light")};return e.jsx(I.Provider,{value:{theme:t,toggleTheme:l},children:r})},oe=()=>{const r=s.useContext(I);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r},ne=s.lazy(()=>h(()=>import("./Sidebar-BOTj-UPQ.js"),__vite__mapDeps([0,1]))),w=()=>e.jsxs("div",{className:"flex items-center justify-center h-full min-h-[200px]",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"}),e.jsx("span",{className:"sr-only",children:"Loading..."})]}),ie=()=>{const[r,t]=s.useState(window.innerWidth<=768),[a,l]=s.useState(!r),o=N(),n=P(),{theme:i,toggleTheme:c}=oe(),{user:d,loading:m,logout:u}=re(),f=n.pathname==="/"||n.pathname.match(/\/(carousel-items|home-images|forum|learn|quizes|videos|quiz-manager)/);if(s.useEffect(()=>{const E=()=>{const v=window.innerWidth<=768;t(v),l(!v)};return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),s.useEffect(()=>{!m&&d===null&&o("/login")},[d,m,o]),m)return e.jsx(w,{});const x=()=>f?e.jsx(j,{}):e.jsx(j,{});return e.jsxs("div",{className:"h-screen flex flex-col bg-white dark:bg-slate-950 text-slate-900 dark:text-white transition-colors duration-300",children:[e.jsx("header",{className:"p-3 md:p-4 bg-slate-100 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r&&e.jsx("button",{onClick:()=>l(!a),className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-lg transition-all duration-200 ease-in-out active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Toggle menu","aria-expanded":a,children:a?e.jsx(k,{size:24}):e.jsx(z,{size:24})}),e.jsx("button",{onClick:()=>o("/"),className:"text-xl md:text-2xl font-bold hover:text-blue-600 dark:hover:text-blue-400 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1","aria-label":"Go to home",children:"CIF Guardian Care"})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsx("button",{onClick:c,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":`Switch to ${i==="light"?"dark":"light"} mode`,children:i==="light"?e.jsx(C,{size:20}):e.jsx(F,{size:20})}),e.jsxs("button",{onClick:()=>u(),className:"flex items-center gap-1 md:gap-2 bg-slate-200 dark:bg-slate-800 px-3 md:px-4 py-1.5 md:py-2 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-700 transition-colors text-sm md:text-base focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(B,{size:16,className:"md:size-5"}),e.jsx("span",{children:"Logout"})]})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[r&&a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 transition-opacity duration-300 ease-in-out",onClick:()=>l(!1)}),e.jsx("div",{className:`
            ${r?"fixed inset-y-0 left-0 z-40 w-64 transform transition-all duration-300 ease-in-out shadow-xl":"w-64"} 
            ${r&&!a?"-translate-x-full":"translate-x-0"}
            bg-slate-100 dark:bg-slate-900 border-r border-slate-200 dark:border-slate-800
          `,children:e.jsx("div",{className:"p-3 md:p-4 h-full",children:e.jsx(s.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ne,{})})})}),e.jsx("main",{className:`
          flex-1 overflow-auto p-3 md:p-4
          ${r&&a?"opacity-50 pointer-events-none blur-sm":"opacity-100 pointer-events-auto blur-0"}
          transition-all duration-300 ease-in-out
        `,children:e.jsx("div",{className:"max-w-7xl mx-auto space-y-4 md:space-y-6",children:x()})})]})]})};function le({id:r,type:t,message:a,duration:l=5e3,onClose:o}){s.useEffect(()=>{if(l>0){const d=setTimeout(()=>{o(r)},l);return()=>clearTimeout(d)}},[r,l,o]);const n=()=>{switch(t){case"success":return e.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return e.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return e.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"info":return e.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}},i=()=>{switch(t){case"success":return"bg-green-50";case"error":return"bg-red-50";case"warning":return"bg-yellow-50";case"info":return"bg-blue-50"}},c=()=>{switch(t){case"success":return"text-green-800";case"error":return"text-red-800";case"warning":return"text-yellow-800";case"info":return"text-blue-800"}};return e.jsx("div",{className:`${i()} rounded-lg p-4 shadow-lg max-w-md w-full pointer-events-auto`,role:"alert",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:n()}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:`text-sm font-medium ${c()}`,children:a})}),e.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:e.jsxs("button",{onClick:()=>o(r),className:`inline-flex rounded-md ${c()} hover:opacity-75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-green-50 focus:ring-green-600`,children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})}const S=s.createContext(void 0);function Le(){const r=s.useContext(S);if(!r)throw new Error("useToast must be used within a ToastProvider");return r}function ce({children:r,maxToasts:t=5}){const[a,l]=s.useState([]),o=s.useCallback((i,c,d=5e3)=>{const u={id:`toast-${Date.now()}-${Math.random()}`,type:i,message:c,duration:d};l(f=>{const x=[...f,u];return x.length>t?x.slice(-t):x})},[t]),n=s.useCallback(i=>{l(c=>c.filter(d=>d.id!==i))},[]);return e.jsxs(S.Provider,{value:{addToast:o,removeToast:n},children:[r,e.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none","aria-live":"polite","aria-atomic":"true",children:a.map(i=>e.jsx(le,{id:i.id,type:i.type,message:i.message,duration:i.duration,onClose:n},i.id))})]})}class de extends s.Component{constructor(a){super(a);g(this,"handleReset",()=>{this.setState({hasError:!1,error:null}),window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,l){b.error("Error caught by boundary:",a,l)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900 p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(D,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),this.state.error&&e.jsxs("details",{className:"mb-6 text-left",children:[e.jsx("summary",{className:"cursor-pointer text-sm text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300",children:"Error details"}),e.jsx("pre",{className:"mt-2 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs overflow-auto",children:this.state.error.toString()})]}),e.jsxs("button",{onClick:this.handleReset,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(O,{size:20}),"Refresh Page"]})]})}):this.props.children}}var ue={VITE_FIREBASE_DATABASE_URL:"https://guardiancare-prod-default-rtdb.asia-southeast1.firebasedatabase.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"480855529488",VITE_FIREBASE_MEASUREMENT_ID:"G-WFT1B0GFH6",VITE_FIREBASE_STORAGE_BUCKET:"guardiancare-prod.firebasestorage.app",VITE_FIREBASE_AUTH_DOMAIN:"guardiancare-prod.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"guardiancare-prod",VITE_FIREBASE_APP_ID:"1:480855529488:web:508d2091762512101b5295",VITE_FIREBASE_API_KEY:"AIzaSyAjPxLK99ce4f68Gu91zZbBbrQM_KiMYEE",BASE_URL:"/cifdashboard/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const he=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"];function me(){const r=he.filter(t=>!ue[t]);if(r.length>0)throw new Error(`Missing required Firebase environment variables:
  ${r.join(`
  `)}

Ensure these are defined in .env.local (local dev) or as GitHub Actions secrets (CI/CD deployment).`)}me();const pe={apiKey:"AIzaSyAjPxLK99ce4f68Gu91zZbBbrQM_KiMYEE",authDomain:"guardiancare-prod.firebaseapp.com",databaseURL:"https://guardiancare-prod-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"guardiancare-prod",storageBucket:"guardiancare-prod.firebasestorage.app",messagingSenderId:"480855529488",appId:"1:480855529488:web:508d2091762512101b5295",measurementId:"G-WFT1B0GFH6"},R=H(pe),Ne=Q(R),A=Y(R);J(A,Z).catch(r=>{b.error("[Firebase] Auth persistence error:",r.message)});const xe=s.lazy(()=>h(()=>import("./Dashboard-Dh9EknLX.js"),__vite__mapDeps([2,1,3,4,5]))),fe=s.lazy(()=>h(()=>import("./Login-CvTrymup.js"),__vite__mapDeps([6,1,5]))),ge=s.lazy(()=>h(()=>import("./Register-DtAtGpcj.js"),__vite__mapDeps([7,1]))),be=s.lazy(()=>h(()=>import("./CarouselItemsPage-_u_iJEeW.js"),__vite__mapDeps([8,1,4,5]))),Ee=s.lazy(()=>h(()=>import("./HomeImagesPage-BNSr0Hxu.js"),__vite__mapDeps([9,1,10,3,4,5,11]))),ve=s.lazy(()=>h(()=>import("./ForumManagementPage-DxsQjZnU.js"),__vite__mapDeps([12,1,5]))),je=s.lazy(()=>h(()=>import("./LearnPage-PpQ-qk_N.js"),__vite__mapDeps([13,1,10,3,4,5,11]))),_e=s.lazy(()=>h(()=>import("./QuizesPage-DDJVXtNt.js"),__vite__mapDeps([14,1,10,3,4,5,11]))),we=s.lazy(()=>h(()=>import("./VideosPage-B7A3JDIU.js"),__vite__mapDeps([15,1,10,3,4,5,11]))),ye=s.lazy(()=>h(()=>import("./QuizManagerPage-h2x8GNz4.js"),__vite__mapDeps([16,1,4,5,3,11]))),p=()=>e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),Ie=V([{path:"/",element:e.jsx(ie,{}),children:[{index:!0,element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(xe,{})})},{path:"carousel-items",element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(be,{})})},{path:"home-images",element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(Ee,{})})},{path:"forum",element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(ve,{})})},{path:"learn",element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(je,{})})},{path:"quizes",element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(_e,{})})},{path:"videos",element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(we,{})})},{path:"quiz-manager",element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(ye,{})})}]},{path:"/login",element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(fe,{})})},{path:"/register",element:e.jsx(s.Suspense,{fallback:e.jsx(p,{}),children:e.jsx(ge,{})})}],{basename:"/cifdashboard"}),Se=new se(A);M.createRoot(document.getElementById("root")).render(e.jsx(G.StrictMode,{children:e.jsx(de,{children:e.jsx(te,{authService:Se,children:e.jsx(ae,{children:e.jsx(ce,{children:e.jsx(U,{router:Ie})})})})})}));export{Le as a,Ne as d,b as l,re as u};
